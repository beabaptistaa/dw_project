{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\nvar _helpers = require('../helpers');\nvar renderPage = function renderPage(page, popstate) {\n  var _this = this;\n  document.documentElement.classList.remove('is-leaving');\n  var isCurrentPage = this.getCurrentUrl() === page.url;\n  if (!isCurrentPage) return;\n\n  // replace state in case the url was redirected\n  var url = new _helpers.Link(page.responseURL).getPath();\n  if (window.location.pathname !== url) {\n    window.history.replaceState({\n      url: url,\n      random: Math.random(),\n      source: 'swup'\n    }, document.title, url);\n\n    // save new record for redirected url\n    this.cache.cacheUrl(_extends({}, page, {\n      url: url\n    }));\n  }\n\n  // only add for non-popstate transitions\n  if (!popstate || this.options.animateHistoryBrowsing) {\n    document.documentElement.classList.add('is-rendering');\n  }\n  this.triggerEvent('willReplaceContent', popstate);\n  // replace blocks\n  for (var i = 0; i < page.blocks.length; i++) {\n    document.body.querySelector('[data-swup=\"' + i + '\"]').outerHTML = page.blocks[i];\n  }\n  // set title\n  document.title = page.title;\n  this.triggerEvent('contentReplaced', popstate);\n  this.triggerEvent('pageView', popstate);\n\n  // empty cache if it's disabled (because pages could be preloaded and stuff)\n  if (!this.options.cache) {\n    this.cache.empty();\n  }\n\n  // start animation IN\n  setTimeout(function () {\n    if (!popstate || _this.options.animateHistoryBrowsing) {\n      _this.triggerEvent('animationInStart');\n      document.documentElement.classList.remove('is-animating');\n    }\n  }, 10);\n\n  // handle end of animation\n  if (!popstate || this.options.animateHistoryBrowsing) {\n    var animationPromises = this.getAnimationPromises('in');\n    Promise.all(animationPromises).then(function () {\n      _this.triggerEvent('animationInDone');\n      _this.triggerEvent('transitionEnd', popstate);\n      _this.cleanupAnimationClasses();\n    });\n  } else {\n    this.triggerEvent('transitionEnd', popstate);\n  }\n\n  // reset scroll-to element\n  this.scrollToElement = null;\n};\nexports.default = renderPage;","map":{"version":3,"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_helpers","require","renderPage","page","popstate","_this","document","documentElement","classList","remove","isCurrentPage","getCurrentUrl","url","Link","responseURL","getPath","window","location","pathname","history","replaceState","random","Math","title","cache","cacheUrl","options","animateHistoryBrowsing","add","triggerEvent","blocks","body","querySelector","outerHTML","empty","setTimeout","animationPromises","getAnimationPromises","Promise","all","then","cleanupAnimationClasses","scrollToElement","default"],"sources":["/Users/beatrizbaptista/Desktop/mestrado/DW/projeto/code/node_modules/swup/lib/modules/renderPage.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _helpers = require('../helpers');\n\nvar renderPage = function renderPage(page, popstate) {\n\tvar _this = this;\n\n\tdocument.documentElement.classList.remove('is-leaving');\n\n\tvar isCurrentPage = this.getCurrentUrl() === page.url;\n\tif (!isCurrentPage) return;\n\n\t// replace state in case the url was redirected\n\tvar url = new _helpers.Link(page.responseURL).getPath();\n\tif (window.location.pathname !== url) {\n\t\twindow.history.replaceState({\n\t\t\turl: url,\n\t\t\trandom: Math.random(),\n\t\t\tsource: 'swup'\n\t\t}, document.title, url);\n\n\t\t// save new record for redirected url\n\t\tthis.cache.cacheUrl(_extends({}, page, { url: url }));\n\t}\n\n\t// only add for non-popstate transitions\n\tif (!popstate || this.options.animateHistoryBrowsing) {\n\t\tdocument.documentElement.classList.add('is-rendering');\n\t}\n\n\tthis.triggerEvent('willReplaceContent', popstate);\n\t// replace blocks\n\tfor (var i = 0; i < page.blocks.length; i++) {\n\t\tdocument.body.querySelector('[data-swup=\"' + i + '\"]').outerHTML = page.blocks[i];\n\t}\n\t// set title\n\tdocument.title = page.title;\n\tthis.triggerEvent('contentReplaced', popstate);\n\tthis.triggerEvent('pageView', popstate);\n\n\t// empty cache if it's disabled (because pages could be preloaded and stuff)\n\tif (!this.options.cache) {\n\t\tthis.cache.empty();\n\t}\n\n\t// start animation IN\n\tsetTimeout(function () {\n\t\tif (!popstate || _this.options.animateHistoryBrowsing) {\n\t\t\t_this.triggerEvent('animationInStart');\n\t\t\tdocument.documentElement.classList.remove('is-animating');\n\t\t}\n\t}, 10);\n\n\t// handle end of animation\n\tif (!popstate || this.options.animateHistoryBrowsing) {\n\t\tvar animationPromises = this.getAnimationPromises('in');\n\t\tPromise.all(animationPromises).then(function () {\n\t\t\t_this.triggerEvent('animationInDone');\n\t\t\t_this.triggerEvent('transitionEnd', popstate);\n\t\t\t_this.cleanupAnimationClasses();\n\t\t});\n\t} else {\n\t\tthis.triggerEvent('transitionEnd', popstate);\n\t}\n\n\t// reset scroll-to element\n\tthis.scrollToElement = null;\n};\n\nexports.default = renderPage;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}